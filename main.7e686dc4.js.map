{"version":3,"sources":["webpack://react-component-router/./src/codec.js","webpack://react-component-router/./src/DispatchContext.js","webpack://react-component-router/./src/initialState.js","webpack://react-component-router/./src/StateContext.js","webpack://react-component-router/./src/shallowEqualObjects.js","webpack://react-component-router/./src/constants.js","webpack://react-component-router/./src/reducer.js","webpack://react-component-router/./src/sortedObject.js","webpack://react-component-router/./src/hooks.js","webpack://react-component-router/./src/Router.js","webpack://react-component-router/./example/A/index.js","webpack://react-component-router/./example/A/A.css?1b87","webpack://react-component-router/./example/Menu/index.js","webpack://react-component-router/./example/Menu/Menu.css?b808","webpack://react-component-router/./example/App/Home/index.js","webpack://react-component-router/./example/App/Foo/index.js","webpack://react-component-router/./example/App/Foo/Foo.css?b730","webpack://react-component-router/./example/App/Bar/index.js","webpack://react-component-router/./example/App/Bar/Bar.css?9dba","webpack://react-component-router/./example/App/index.js","webpack://react-component-router/./example/App/App.css?24e5","webpack://react-component-router/./example/bootstrap.js","webpack://react-component-router/./src/useLocationSync.js","webpack://react-component-router/./example/index.js","webpack://react-component-router/webpack/bootstrap","webpack://react-component-router/webpack/runtime/define property getters","webpack://react-component-router/webpack/runtime/hasOwnProperty shorthand","webpack://react-component-router/webpack/runtime/jsonp chunk loading","webpack://react-component-router/webpack/startup"],"names":["safeQuery","query","newQuery","Object","keys","forEach","key","queryToSearch","search","stringify","strictNullHandling","length","searchToQuery","parse","substr","DispatchContext","createContext","initialState","params","cleanQuery","cleanSearch","StateContext","shallowEqualObjects","objA","objB","aKeys","bKeys","len","i","prototype","hasOwnProperty","call","NAVIGATE","RESTORE","recalculate","state","input","sort","reduce","result","newState","clean","assign","onRestore","onNavigate","onAdd","newParams","onRemove","param","reducer","type","payload","action","mapping","stateB","stateA","useValue","useContext","useAdd","dispatch","useCallback","Router","init","children","useReducer","value","defaultProps","undefined","A","rest","navigate","useNavigate","onClick","e","preventDefault","href","router","nextCleanSearch","useCleanHref","isActive","useIsActive","className","data-active","Menu","React","item","Home","Foo","addDefaultParam","useEffect","foo","subpage","parseInt","map","Bar","bar","App","page","WithLocation","debounceTimeout","restore","useRestore","historyRef","useRef","createBrowserHistory","timer","setTimeout","document","location","pathname","current","push","clearTimeout","didUnsubscribe","unsubscribe","listen","history","nextQuery","useLocationSync","async","whatever","JSON","querySelector","innerHTML","console","log","render","bootstrap","__webpack_module_cache__","__webpack_require__","moduleId","exports","module","__webpack_modules__","m","x","d","definition","o","defineProperty","enumerable","get","obj","prop","installedChunks","179","deferredModules","checkDeferredModules","webpackJsonpCallback","parentChunkLoadingFunction","data","chunkId","chunkIds","moreModules","runtime","executeModules","resolves","shift","apply","chunkLoadingGlobal","self","checkDeferredModulesImpl","deferredModule","fulfilled","j","depId","splice","s","bind","startup"],"mappings":"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","file":"main.7e686dc4.js","sourcesContent":["import {parse, stringify} from 'qs';\n\nexport function safeQuery(query = {}) {\n  const newQuery = query === null ? {} : query;\n\n  Object.keys(newQuery).forEach(key => {\n    newQuery[key] = `${newQuery[key]}`;\n  });\n\n  return newQuery;\n}\n\nexport function queryToSearch(query) {\n  const search = stringify(query, {strictNullHandling: true});\n\n  return search.length > 0 ? `?${search}` : '';\n}\n\nexport function searchToQuery(search) {\n  return safeQuery(parse(search.substr(1), {strictNullHandling: true}));\n}\n","import {createContext} from 'react';\n\nexport const DispatchContext = createContext(() => {});\n","export const initialState = {\n  query: {},\n  params: {},\n  // just some cached values\n  search: '',\n  cleanQuery: {},\n  cleanSearch: ''\n};\n","import {createContext} from 'react';\nimport {initialState} from './initialState';\n\nexport const StateContext = createContext(initialState);\n","export const shallowEqualObjects = (objA, objB) => {\n  if (objA === objB) {\n    return true;\n  }\n\n  if (!objA || !objB) {\n    return false;\n  }\n\n  const aKeys = Object.keys(objA);\n  const bKeys = Object.keys(objB);\n  const len = aKeys.length;\n\n  if (bKeys.length !== len) {\n    return false;\n  }\n\n  for (let i = 0; i < len; i += 1) {\n    const key = aKeys[i];\n\n    if (objA[key] !== objB[key] || !Object.prototype.hasOwnProperty.call(objB, key)) {\n      return false;\n    }\n  }\n\n  return true;\n};\n","export const ADD = 'ADD';\nexport const REMOVE = 'REMOVE';\nexport const NAVIGATE = 'NAVIGATE';\nexport const RESTORE = 'RESTORE';\n","import {shallowEqualObjects} from './shallowEqualObjects';\nimport {sortedObject} from './sortedObject';\nimport {initialState} from './initialState';\nimport {queryToSearch, safeQuery} from './codec';\nimport {ADD, NAVIGATE, REMOVE, RESTORE} from './constants';\n\nexport function isEqualState(stateA, stateB) {\n  return (\n    shallowEqualObjects(stateA.query, stateB.query) &&\n    shallowEqualObjects(stateA.params, stateB.params)\n  );\n}\n\nexport function cleanupQuery(query, params) {\n  return Object.keys(query).reduce(\n    (clean, key) =>\n      key in params && query[key] === params[key]\n        ? clean\n        : Object.assign(clean, {[key]: query[key]}),\n    {}\n  );\n}\nexport function recalculate(state) {\n  const newQuery = safeQuery(sortedObject({...state.params, ...state.query}));\n  const newState = shallowEqualObjects(state.query, newQuery) ? state : {...state, query: newQuery};\n\n  const search = queryToSearch(newQuery);\n  const cleanQuery = cleanupQuery(newQuery, state.params);\n  const cleanSearch = queryToSearch(cleanQuery);\n  return Object.assign(newState, {search, cleanQuery, cleanSearch});\n}\n\nexport function onRestore(state, {query}) {\n  const newQuery = {...query};\n  if (shallowEqualObjects(state.query, newQuery)) {\n    return state;\n  }\n  return recalculate({...state, query: newQuery});\n}\n\nexport function onNavigate(state, {query}) {\n  const newQuery = {...state.query, ...query};\n  if (shallowEqualObjects(state.query, newQuery)) {\n    return state;\n  }\n  return recalculate({...state, query: newQuery});\n}\n\nexport function onAdd(state, {params}) {\n  const newParams = {...state.params, ...params};\n  if (shallowEqualObjects(state.params, newParams)) {\n    return state;\n  }\n  return recalculate({...state, params: newParams});\n}\n\nexport function onRemove(state, {params}) {\n  const newQuery = {...state.query};\n  const newParams = {...state.params};\n  Object.keys(params).forEach(param => {\n    if (param in newQuery) {\n      delete newQuery[param];\n    }\n    if (param in newParams) {\n      delete newParams[param];\n    }\n  });\n  Object.assign(state, {query: newQuery, params: newParams});\n  return recalculate(state);\n}\n\nexport function reduce(state, action) {\n  const mapping = {\n    [RESTORE]: onRestore,\n    [NAVIGATE]: onNavigate,\n    [ADD]: onAdd,\n    [REMOVE]: onRemove\n  };\n  return action.type in mapping ? mapping[action.type](state, action) : state;\n}\n\nexport function reducer(state = initialState, {type, ...payload}) {\n  const newState = reduce(state, {type, ...payload});\n  return isEqualState(state, newState) ? state : newState;\n}\n","export function sortedObject(input) {\n  return Object.keys(input)\n    .sort()\n    .reduce((result, key) => ({...result, [key]: input[key]}), {});\n}\n","import {useCallback, useContext} from 'react';\nimport {StateContext} from './StateContext';\nimport {DispatchContext} from './DispatchContext';\nimport {onNavigate} from './reducer';\nimport {ADD, NAVIGATE, REMOVE, RESTORE} from './constants';\n\nexport function useValue(key) {\n  const router = useContext(StateContext);\n  return router.query[key];\n}\n\nexport function useSearch() {\n  const router = useContext(StateContext);\n  const {search} = router;\n  return search;\n}\n\nexport function useCleanSearch() {\n  const router = useContext(StateContext);\n  const {cleanSearch} = router;\n  return cleanSearch;\n}\n\nexport function useIsActive(query) {\n  const router = useContext(StateContext);\n  const {cleanSearch} = router;\n  if (!query) {\n    return false;\n  }\n  const {cleanSearch: nextCleanSearch} = onNavigate(router, {query});\n  return cleanSearch === nextCleanSearch;\n}\n\nexport function useCleanHref(query) {\n  const router = useContext(StateContext);\n  const {cleanSearch} = router;\n  if (!query) {\n    return cleanSearch;\n  }\n  const {cleanSearch: nextCleanSearch} = onNavigate(router, {query});\n  return nextCleanSearch;\n}\n\nexport function useHref(query) {\n  const router = useContext(StateContext);\n  const {search} = router;\n  if (!query) {\n    return search;\n  }\n  const {search: nextSearch} = onNavigate(router, {query});\n  return nextSearch;\n}\n\nexport function useNavigate() {\n  const dispatch = useContext(DispatchContext);\n  return useCallback(query => dispatch({type: NAVIGATE, query}), [dispatch]);\n}\n\nexport function useAdd() {\n  const dispatch = useContext(DispatchContext);\n  return useCallback(params => dispatch({type: ADD, params}), [dispatch]);\n}\n\nexport function useRemove() {\n  const dispatch = useContext(DispatchContext);\n  return useCallback(params => dispatch({type: REMOVE, params}), [dispatch]);\n}\n\nexport function useRestore() {\n  const dispatch = useContext(DispatchContext);\n  return useCallback(query => dispatch({type: RESTORE, query}), [dispatch]);\n}\n","import React, {useReducer} from 'react';\nimport PropTypes from 'prop-types';\nimport {DispatchContext} from './DispatchContext';\nimport {reducer, recalculate} from './reducer';\nimport {searchToQuery} from './codec';\nimport {StateContext} from './StateContext';\n\nexport function Router({params, query, search, init, children}) {\n  const [state, dispatch] = useReducer(\n    reducer,\n    recalculate({\n      params,\n      query: {...query, ...searchToQuery(search)}\n    }),\n    init\n  );\n  return (\n    <DispatchContext.Provider value={dispatch}>\n      <StateContext.Provider value={state}>{children}</StateContext.Provider>\n    </DispatchContext.Provider>\n  );\n}\nRouter.propTypes = {\n  // eslint-disable-next-line react/forbid-prop-types\n  params: PropTypes.object,\n  // eslint-disable-next-line react/forbid-prop-types\n  query: PropTypes.object,\n  search: PropTypes.string,\n  init: PropTypes.func,\n  children: PropTypes.node.isRequired\n};\nRouter.defaultProps = {\n  params: {},\n  query: {},\n  search: '?',\n  init: undefined\n};\n","import React, {useCallback} from 'react';\nimport PropTypes from 'prop-types';\nimport {useCleanHref, useIsActive, useNavigate} from '~';\nimport css from './A.css';\n\nexport function A({query, children, ...rest}) {\n  const navigate = useNavigate();\n\n  const onClick = useCallback(\n    e => {\n      e.preventDefault();\n      navigate(query);\n    },\n    [navigate, query]\n  );\n\n  const href = useCleanHref(query);\n  const isActive = useIsActive(query);\n\n  return (\n    <a className={css.e} href={href} onClick={onClick} data-active={isActive} {...rest}>\n      {children}\n    </a>\n  );\n}\nA.propTypes = {\n  // eslint-disable-next-line react/forbid-prop-types\n  query: PropTypes.object,\n  children: PropTypes.node\n};\nA.defaultProps = {\n  query: {},\n  children: undefined\n};\n","// extracted by mini-css-extract-plugin\nexport default {\"e\":\"example-a\"};","import React from 'react';\nimport PropTypes from 'prop-types';\nimport css from './Menu.css';\n\nexport function Menu({children}) {\n  return (\n    <ul className={css.e}>\n      {React.Children.map(children, item => (\n        <li>{item}</li>\n      ))}\n    </ul>\n  );\n}\nMenu.propTypes = {\n  children: PropTypes.node.isRequired\n};\n","// extracted by mini-css-extract-plugin\nexport default {\"e\":\"example-menu\"};","import React from 'react';\n\nexport function Home() {\n  return <h1>Hello, World!</h1>;\n}\n","import React, {useEffect} from 'react';\nimport {useAdd, useValue} from '~';\nimport {Menu} from '../../Menu';\nimport {A} from '../../A';\n\nimport css from './Foo.css';\n\nexport function Foo() {\n  const addDefaultParam = useAdd();\n\n  useEffect(() => {\n    addDefaultParam({foo: 1});\n  }, [addDefaultParam]);\n\n  const subpage = parseInt(useValue('foo'), 10);\n  return (\n    <div className={css.e}>\n      <h1>Foo</h1>\n      <Menu>\n        {[1, 2, 3, 4, 5].map(foo => (\n          <A key={foo} query={{foo}}>\n            Foo {foo}\n          </A>\n        ))}\n      </Menu>\n      <div className={css.content}>\n        {[1, 2, 3, 4, 5].map(foo => subpage === foo && <h2 key={foo}>Foo {foo}</h2>)}\n      </div>\n    </div>\n  );\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"e\":\"app-foo\",\"content\":\"app-foo--content\"};","import React, {useEffect} from 'react';\nimport {useAdd, useValue} from '~';\nimport {Menu} from '../../Menu';\nimport {A} from '../../A';\n\nimport css from './Bar.css';\n\nexport function Bar() {\n  const subpage = useValue('bar');\n\n  const addDefaultParam = useAdd();\n\n  useEffect(() => {\n    addDefaultParam({bar: 'no'});\n  }, [addDefaultParam]);\n\n  return (\n    <div className={css.e}>\n      <h1>Foo</h1>\n      <Menu>\n        {['yes', 'no'].map(bar => (\n          <A key={bar} query={{bar}}>\n            Bar {bar}\n          </A>\n        ))}\n      </Menu>\n      <div className={css.content}>\n        {['yes', 'no'].map(bar => subpage === bar && <h2 key={bar}>Bar {bar}</h2>)}\n      </div>\n    </div>\n  );\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"e\":\"app-bar\",\"content\":\"app-bar--content\"};","import React from 'react';\nimport {useValue} from '~';\nimport {A} from '../A';\nimport {Menu} from '../Menu';\nimport {Home} from './Home';\nimport {Foo} from './Foo';\nimport {Bar} from './Bar';\n\nimport css from './App.css';\n\nexport function App() {\n  const page = useValue('page');\n\n  return (\n    <div className={css.e}>\n      <Menu>\n        <A query={{page: 'home'}}>Home</A>\n        <A query={{page: 'foo'}}>Foo</A>\n        <A query={{page: 'bar'}}>Bar</A>\n      </Menu>\n      <section className={css.content}>\n        {page === 'home' && <Home />}\n        {page === 'foo' && <Foo />}\n        {page === 'bar' && <Bar />}\n      </section>\n    </div>\n  );\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"e\":\"example-app\",\"content\":\"example-app--content\"};","import React from 'react';\nimport {render} from 'react-dom';\nimport {Router, useLocationSync} from '~';\nimport {App} from './App';\n\nimport './global.css';\n\nfunction WithLocation() {\n  useLocationSync();\n  return <App />;\n}\n\nexport const bootstrap = async () => {\n  const {whatever} = JSON.parse(document.querySelector('#config').innerHTML);\n  console.log('CONFIG', {whatever});\n\n  render(\n    <React.StrictMode>\n      <Router search={document.location.search} params={{page: 'home'}}>\n        <WithLocation />\n      </Router>\n    </React.StrictMode>,\n    document.querySelector('#app')\n  );\n};\n","import {useContext, useEffect, useRef} from 'react';\nimport {createBrowserHistory} from 'history';\nimport {searchToQuery} from './codec';\nimport {recalculate} from './reducer';\nimport {useRestore} from './hooks';\nimport {StateContext} from './StateContext';\n\nexport function useLocationSync({debounceTimeout = 50} = {}) {\n  const restore = useRestore();\n  const router = useContext(StateContext);\n\n  const {params, cleanSearch} = router;\n\n  const historyRef = useRef(createBrowserHistory());\n\n  // State -> URL\n  useEffect(() => {\n    let timer = setTimeout(() => {\n      if (timer === null) {\n        return;\n      }\n      timer = null;\n      if (cleanSearch !== document.location.search) {\n        const {pathname} = document.location;\n        historyRef.current.push({pathname, search: cleanSearch});\n      }\n    }, debounceTimeout);\n\n    return () => {\n      clearTimeout(timer);\n      timer = null;\n    };\n  }, [cleanSearch, debounceTimeout]);\n\n  // URL -> State\n  useEffect(() => {\n    let didUnsubscribe = false;\n    const unsubscribe = historyRef.current.listen(history => {\n      if (didUnsubscribe) {\n        return;\n      }\n      const {query: nextQuery, cleanSearch: nextCleanSearch} = recalculate({\n        params,\n        query: searchToQuery(history.location.search)\n      });\n\n      if (cleanSearch !== nextCleanSearch) {\n        restore(nextQuery);\n      }\n    });\n\n    return () => {\n      didUnsubscribe = true;\n      unsubscribe();\n    };\n  }, [cleanSearch, params, restore]);\n}\n","import {bootstrap} from './bootstrap';\n\nbootstrap();\n\nif (module.hot) {\n  module.hot.accept('./bootstrap', () => {\n    bootstrap();\n  });\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tif(__webpack_module_cache__[moduleId]) {\n\t\treturn __webpack_module_cache__[moduleId].exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n// the startup function\n// It's empty as some runtime module handles the default behavior\n__webpack_require__.x = x => {}\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop)","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// Promise = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t179: 0\n};\n\nvar deferredModules = [\n\t[827,736]\n];\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\nvar checkDeferredModules = x => {};\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime, executeModules] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0, resolves = [];\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tresolves.push(installedChunks[chunkId][0]);\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\tfor(moduleId in moreModules) {\n\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t}\n\t}\n\tif(runtime) runtime(__webpack_require__);\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\twhile(resolves.length) {\n\t\tresolves.shift()();\n\t}\n\n\t// add entry modules from loaded chunk to deferred list\n\tif(executeModules) deferredModules.push.apply(deferredModules, executeModules);\n\n\t// run deferred modules when all chunks ready\n\treturn checkDeferredModules();\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkreact_component_router\"] = self[\"webpackChunkreact_component_router\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));\n\nfunction checkDeferredModulesImpl() {\n\tvar result;\n\tfor(var i = 0; i < deferredModules.length; i++) {\n\t\tvar deferredModule = deferredModules[i];\n\t\tvar fulfilled = true;\n\t\tfor(var j = 1; j < deferredModule.length; j++) {\n\t\t\tvar depId = deferredModule[j];\n\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferredModules.splice(i--, 1);\n\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n\t\t}\n\t}\n\tif(deferredModules.length === 0) {\n\t\t__webpack_require__.x();\n\t\t__webpack_require__.x = x => {};\n\t}\n\treturn result;\n}\nvar startup = __webpack_require__.x;\n__webpack_require__.x = () => {\n\t// reset startup function so it can be called again when more startup code is added\n\t__webpack_require__.x = startup || (x => {});\n\treturn (checkDeferredModules = checkDeferredModulesImpl)();\n};","// run startup\nreturn __webpack_require__.x();\n"],"sourceRoot":""}